(window.webpackJsonp=window.webpackJsonp||[]).push([["bh0E"],{bh0E:function(t,e,i){(function(e){t.exports=function(){var t=t||{guid:"$BAIDU$"},i={};i[t.guid]={},t.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.lang=t.lang||{},t.lang.guid=function(){return"TANGRAM__"+(i[t.guid]._counter++).toString(36)},i[t.guid]._counter=i[t.guid]._counter||1,i[t.guid]._instances=i[t.guid]._instances||{},t.lang.Class=function(e){this.guid=e||t.lang.guid(),i[t.guid]._instances[this.guid]=this},i[t.guid]._instances=i[t.guid]._instances||{},t.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},t.lang.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},t.lang.Class.prototype.dispose=function(){for(var e in delete i[t.guid]._instances[this.guid],this)t.lang.isFunction(this[e])||delete this[e];this.disposed=!0},t.lang.Event=function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=null},t.lang.Class.prototype.addEventListener=function(e,i,n){if(t.lang.isFunction(i)){!this.__listeners&&(this.__listeners={});var s,o=this.__listeners;if("string"==typeof n&&n){if(/[^\w\-]/.test(n))throw"nonstandard key:"+n;i.hashCode=n,s=n}0!=e.indexOf("on")&&(e="on"+e),"object"!=typeof o[e]&&(o[e]={}),s=s||t.lang.guid(),i.hashCode=s,o[e][s]=i}},t.lang.Class.prototype.removeEventListener=function(e,i){if(t.lang.isFunction(i))i=i.hashCode;else if(!t.lang.isString(i))return;!this.__listeners&&(this.__listeners={}),0!=e.indexOf("on")&&(e="on"+e);var n=this.__listeners;n[e]&&n[e][i]&&delete n[e][i]},t.lang.Class.prototype.dispatchEvent=function(e,i){for(var n in t.lang.isString(e)&&(e=new t.lang.Event(e)),!this.__listeners&&(this.__listeners={}),i=i||{})e[n]=i[n];var s=this.__listeners,o=e.type;if(e.target=e.target||this,e.currentTarget=this,0!=o.indexOf("on")&&(o="on"+o),t.lang.isFunction(this[o])&&this[o].apply(this,arguments),"object"==typeof s[o])for(n in s[o])s[o][n].apply(this,arguments);return e.returnValue},t.lang.inherits=function(t,e,i){var n,s,o=t.prototype,a=new Function;for(n in a.prototype=e.prototype,s=t.prototype=new a,o)s[n]=o[n];t.prototype.constructor=t,t.superClass=e.prototype,"string"==typeof i&&(s._className=i)},t.dom=t.dom||{},t._g=t.dom._g=function(e){return t.lang.isString(e)?document.getElementById(e):e},t.g=t.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},t.insertHTML=t.dom.insertHTML=function(e,i,n){var s,o;return(e=t.dom.g(e)).insertAdjacentHTML?e.insertAdjacentHTML(i,n):(s=e.ownerDocument.createRange(),"AFTERBEGIN"==(i=i.toUpperCase())||"BEFOREEND"==i?(s.selectNodeContents(e),s.collapse("AFTERBEGIN"==i)):(s[(o="BEFOREBEGIN"==i)?"setStartBefore":"setEndAfter"](e),s.collapse(o)),s.insertNode(s.createContextualFragment(n))),e},t.ac=t.dom.addClass=function(e,i){e=t.dom.g(e);for(var n=i.split(/\s+/),s=e.className,o=" "+s+" ",a=0,l=n.length;a<l;a++)o.indexOf(" "+n[a]+" ")<0&&(s+=(s?" ":"")+n[a]);return e.className=s,e},t.event=t.event||{},t.event._listeners=t.event._listeners||[],t.on=t.event.on=function(e,i,n){i=i.replace(/^on/i,""),e=t._g(e);var s,o=function(t){n.call(e,t)},a=t.event._listeners,l=t.event._eventFilter,r=i;return i=i.toLowerCase(),l&&l[i]&&(s=l[i](e,i,o),r=s.type,o=s.listener),e.addEventListener?e.addEventListener(r,o,!1):e.attachEvent&&e.attachEvent("on"+r,o),a[a.length]=[e,i,n,o,r],e},t.un=t.event.un=function(e,i,n){e=t._g(e),i=i.replace(/^on/i,"").toLowerCase();for(var s,o,a,l=t.event._listeners,r=l.length,p=!n;r--;)(s=l[r])[1]!==i||s[0]!==e||!p&&s[2]!==n||(o=s[4],a=s[3],e.removeEventListener?e.removeEventListener(o,a,!1):e.detachEvent&&e.detachEvent("on"+o,a),l.splice(r,1));return e},t.preventDefault=t.event.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1};var n=function(i,n){if(i){var o=this.OperationMask={_map:null,_html:"<div style='background:transparent url(http://api.map.baidu.com/images/blank.gif);position:absolute;left:0;top:0;width:100%;height:100%;z-index:1000' unselectable='on'></div>",_maskElement:null,_cursor:"default",_inUse:!1,show:function(t){this._map||(this._map=t),this._inUse=!0,this._maskElement||this._createMask(t),this._maskElement.style.display="block"},_createMask:function(e){if(this._map=e,this._map){t.insertHTML(this._map.getContainer(),"beforeEnd",this._html);var i=this._maskElement=this._map.getContainer().lastChild,n=function(e){return s(e),t.preventDefault(e)};t.on(i,"mouseup",function(t){2==t.button&&n(t)}),t.on(i,"contextmenu",n),i.style.display="none"}},getDrawPoint:function(t,i){var n=(t=e.event||t).layerX||t.offsetX||0,s=t.layerY||t.offsetY||0,a=t.target||t.srcElement;if(a!=o.getDom(this._map)&&1==i)for(;a&&a!=this._map.getContainer();)0==a.clientWidth&&0==a.clientHeight&&a.offsetParent&&"td"==a.offsetParent.nodeName.toLowerCase()||(n+=a.offsetLeft,s+=a.offsetTop),a=a.offsetParent;if(!(a!=o.getDom(this._map)&&a!=this._map.getContainer()||void 0===n||void 0===s||isNaN(n)||isNaN(s)))return this._map.pixelToPoint(new BMap.Pixel(n,s))},hide:function(){this._map&&(this._inUse=!1,this._maskElement&&(this._maskElement.style.display="none"))},getDom:function(t){return this._maskElement||this._createMask(t),this._maskElement},_setCursor:function(t){this._cursor=t||"default",this._maskElement&&(this._maskElement.style.cursor=this._cursor)}};this._map=i,n=n||{},this._opts=t.extend(t.extend(this._opts||{},{tips:"测距",followText:"单击确定地点，双击结束",unit:"metric",lineColor:"#ff6319",lineStroke:2,opacity:.8,lineStyle:"solid",cursor:"http://api.map.baidu.com/images/ruler.cur",secIcon:null,closeIcon:null}),n),this._followTitle=null,this._points=[],this._paths=[],this._dots=[],this._segDistance=[],this._overlays=[],this._enableMassClear=!0,this._units={metric:{name:"metric",conv:1,incon:1e3,u1:"米",u2:"公里"},us:{name:"us",conv:3.2808,incon:5279.856,u1:"英尺",u2:"英里"}},this._isOpen=!1,this._startFollowText="单击确定起点",this._movingTimerId=null,this._styles={BMapLib_diso:"height:17px;width:5px;position:absolute;background:url(http://api.map.baidu.com/images/dis_box_01.gif) no-repeat left top",BMapLib_disi:"color:#7a7a7a;position:absolute;left:5px;padding:0 4px 1px 0;line-height:17px;background:url(http://api.map.baidu.com/images/dis_box_01.gif) no-repeat right top",BMapLib_disBoxDis:"color:#ff6319;font-weight:bold"},this._opts.lineStroke<=0&&(this._opts.lineStroke=2),this._opts.opacity>1?this._opts.opacity=1:this._opts.opacity<0&&(this._opts.opacity=0),"solid"!=this._opts.lineStyle&&"dashed"!=this._opts.lineStyle&&(this._opts.lineStyle="solid"),this._units[this._opts.unit]||(this._opts.unit="metric"),this.text="测距"}};function s(t){var t=e.event||t;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}return t.lang.inherits(n,t.lang.Class,"DistanceTool"),n.prototype._bind=function(){this._setCursor(this._opts.cursor);var i=this,n=this.OperationMask;t.on(this._map.getContainer(),"mousemove",function(t){if(i._isOpen&&i._followTitle)if(((t=e.event||t).target||t.srcElement)==n.getDom(i._map)){i._mapMoving||i._followTitle.show();var s=n.getDrawPoint(t,!0);i._followTitle.setPosition(s)}else i._followTitle.hide()}),this._startFollowText&&(this._followTitle=new BMap.Label(this._startFollowText,{offset:new BMap.Size(14,16)}),this._followTitle.setStyles({color:"#333",borderColor:"#ff0103"}))},n.prototype.open=function(){var i=this.OperationMask;if(1==this._isOpen)return!0;if(!n._toolInUse){this._isOpen=!0,n._toolInUse=!0,this._mapMoving&&delete this._mapMoving;var s=this;this._binded||(this._binded=!0,this._bind(),this._map.addEventListener("moving",function(){s._hideCurrent()})),this._followTitle&&(this._map.addOverlay(this._followTitle),this._followTitle.hide());var o=function(n){var o=s._map;if(s._isOpen){n=e.event||n;var a=i.getDrawPoint(n,!0);if(s._isPointValid(a)){if(s._bind.initX=n.pageX||n.clientX||0,s._bind.initY=n.pageY||n.clientY||0,s._points.length>0){var l=o.pointToPixel(s._points[s._points.length-1]),r=o.pointToPixel(a);if(Math.sqrt(Math.pow(l.x-r.x,2)+Math.pow(l.y-r.y,2))<5)return}s._bind.x=n.layerX||n.offsetX||0,s._bind.y=n.layerY||n.offsetY||0,s._points.push(a),s._addSecPoint(a),0==s._paths.length&&s._formatTitle(1,s._opts.followText,s._getTotalDistance()),s._paths.length>0&&(s._paths[s._paths.length-1].show(),s._paths[s._paths.length-1].setStrokeOpacity(s._opts.opacity));var p=new BMap.Polyline([a,a],{enableMassClear:s._enableMassClear});s._map.addOverlay(p),s._paths.push(p),s._overlays.push(p),p.setStrokeWeight(s._opts.lineStroke),p.setStrokeColor(s._opts.lineColor),p.setStrokeOpacity(s._opts.opacity/2),p.setStrokeStyle(s._opts.lineStyle),s._mapMoving&&p.hide(),s._points.length>1&&s._paths[s._points.length-2].setPositionAt(1,a);var _="";if(s._points.length>1){s._setSegDistance(s._points[s._points.length-2],s._points[s._points.length-1]);var h=s._getTotalDistance();_=s._formatDisStr(h)}else _="起点";var u=new BMap.Label(_,{offset:new BMap.Size(10,-5),enableMassClear:s._enableMassClear});u.setStyles({color:"#333",borderColor:"#ff0103"}),s._map.addOverlay(u),s._formatSegLabel(u,_),s._overlays.push(u),a.disLabel=u,u.setPosition(a);var c=new t.lang.Event("onaddpoint");c.point=a,c.pixel=s._map.pointToPixel(a),c.index=s._points.length-1,c.distance=s._getTotalDistance().toFixed(0),s.dispatchEvent(c)}}},a=function(t){if(s._isOpen)if(s._paths.length>0){var n=(t=e.event||t).pageX||t.clientX||0,o=t.pageY||t.clientY||0;void 0===s._bind.initX&&(s._bind.x=t.layerX||t.offsetX||0,s._bind.y=t.layerY||t.offsetY||0,s._bind.initX=n,s._bind.initY=o);var l=s._bind.x+n-s._bind.initX,r=s._bind.y+o-s._bind.initY,p=s._paths[s._paths.length-1],_=s._map.pixelToPoint(new BMap.Pixel(l,r));p.setPositionAt(1,_),s._mapMoving||p.show();var h=0,u=0;if(l<10?h=8:l>s._map.getSize().width-10&&(h=-8),r<10?u=8:r>s._map.getSize().height-10&&(u=-8),0!=h||0!=u)a._movingTimerId||(s._mapMoving=!0,s._map.panBy(h,u,{noAnimation:!0}),s._movingTimerId=a._movingTimerId=setInterval(function(){s._map.panBy(h,u,{noAnimation:!0})},30),p.hide(),s._followTitle&&s._followTitle.hide());else if(a._movingTimerId){clearInterval(a._movingTimerId),delete a._movingTimerId,delete s._movingTimerId;var c=s._paths[s._paths.length-1],d=s._map.pixelToPoint(new BMap.Pixel(l,r));if(!c)return;c.setPositionAt(1,d),c.show(),s._followTitle&&(s._followTitle.setPosition(d),s._followTitle.show()),s._bind.i=0,s._bind.j=0,delete s._mapMoving}if(s._followTitle){var g=s._getTotalDistance(),f=s._map.getDistance(s._points[s._points.length-1],_);s._updateInstDis(s._followTitle,g+f)}}else s._followTitle&&(s._followTitle.show(),((t=e.event||t).target||t.srcElement)!=i.getDom()&&s._followTitle.hide())},l=function(e){s._isOpen&&(t.un(i.getDom(s._map),"click",o),t.un(document,"mousemove",a),t.un(i.getDom(s._map),"dblclick",l),t.un(document,"keydown",r),t.un(i.getDom(s._map),"mouseup",p),setTimeout(function(){s.close()},50))},r=function(t){27==(t=e.event||t).keyCode&&(s._clearCurData(),setTimeout(function(){s.close()},50))},p=function(t){t=e.event||t;var i=0;/msie (\d+\.\d)/i.test(navigator.userAgent)&&(i=document.documentMode||+RegExp.$1),(i&&1!=t.button||2==t.button)&&s.close()};return s._initData(),this._formatTitle(),i.show(this._map),this._setCursor(this._opts.cursor),t.on(i.getDom(this._map),"click",o),t.on(document,"mousemove",a),t.on(i.getDom(this._map),"dblclick",l),t.on(document,"keydown",r),t.on(i.getDom(this._map),"mouseup",p),this.bindFunc=[{elem:i.getDom(this._map),type:"click",func:o},{elem:i.getDom(this._map),type:"dblclick",func:l},{elem:document,type:"mousemove",func:a},{elem:document,type:"keydown",func:r},{elem:i.getDom(this._map),type:"mouseup",func:p}],!0}},n.prototype._dispatchLastEvent=function(){var e=new t.lang.Event("ondrawend");e.points=this._points?this._points.slice(0):[],e.overlays=this._paths?this._paths.slice(0,this._paths.length-1):[],e.distance=this._getTotalDistance().toFixed(0),this.dispatchEvent(e)},n.prototype.close=function(){var e=this.OperationMask;if(0!=this._isOpen){this._isOpen=!1,n._toolInUse=!1,this._mapMoving&&delete this._mapMoving;var i=this;if(i._dispatchLastEvent(),i._points.length<2)i._clearCurData();else{i._paths[i._paths.length-1].remove(),i._paths[i._paths.length-1]=null,i._paths.length=i._paths.length-1;var s=i._points[i._points.length-1];s.disLabel&&s.disLabel.remove(),i._processLastOp()}e.hide();for(var o=0,a=this.bindFunc.length;o<a;o++)t.un(this.bindFunc[o].elem,this.bindFunc[o].type,this.bindFunc[o].func);i._movingTimerId&&(clearInterval(i._movingTimerId),i._movingTimerId=null),this._followTitle&&this._followTitle.hide()}},n.prototype._clearCurData=function(){this.OperationMask;for(var t=0,e=this._points.length;t<e;t++)this._points[t].disLabel&&this._points[t].disLabel.remove();for(t=0,e=this._paths.length;t<e;t++)this._paths[t].remove();for(t=0,e=this._dots.length;t<e;t++)this._dots[t].remove();this._initData()},n.prototype._initData=function(){this._points.length=0,this._paths.length=0,this._segDistance.length=0,this._dots.length=0},n.prototype._setSegDistance=function(t,e){if(t&&e){var i=this._map.getDistance(t,e);return this._segDistance.push(i),i}},n.prototype._getTotalDistance=function(){for(var t=0,e=0,i=this._segDistance.length;e<i;e++)t+=this._segDistance[e];return t},n.prototype._convertUnit=function(t,e){return e=e||"metric",this._units[e]?t*this._units[e].conv:t},n.prototype._addSecPoint=function(t){var e=this._opts.secIcon?this._opts.secIcon:new BMap.Icon("http://api.map.baidu.com/images/mapctrls.png",new BMap.Size(11,11),{imageOffset:new BMap.Size(-26,-313)}),i=new BMap.Marker(t,{icon:e,clickable:!1,baseZIndex:35e5,zIndexFixed:!0,enableMassClear:this._enableMassClear});this._map.addOverlay(i),this._dots.push(i)},n.prototype._formatDisStr=function(t){var e=this._opts.unit,i=this._units[e].u1,n=this._convertUnit(t,e);return n>this._units[e].incon?(n/=this._units[e].incon,i=this._units[e].u2,n=n.toFixed(1)):n=n.toFixed(0),n+i},n.prototype._setCursor=function(t){var e=this.OperationMask,i=/webkit/.test(navigator.userAgent.toLowerCase())?"url("+this._opts.cursor+") 3 6, crosshair":"url("+this._opts.cursor+"), crosshair";e._setCursor(i)},n.prototype._getCursor=function(){return this._opts.cursor},n.prototype._formatSegLabel=function(t,e){t.setStyle({border:"none",padding:"0"}),t.setContent("<span style='"+this._styles.BMapLib_diso+"'><span style='"+this._styles.BMapLib_disi+"'>"+e+"</span></span>")},n.prototype._processLastOp=function(){var e=this;if(delete e._bind.x,delete e._bind.y,delete e._bind.initX,delete e._bind.initY,e._paths.length>e._points.length-1){var i=e._paths.length-1;e._paths[i].remove(),e._paths[i]=null,e._paths.length=i}var n={};n.points=e._points.slice(0),n.paths=e._paths.slice(0),n.dots=e._dots.slice(0),n.segDis=e._segDistance.slice(0);var o=e._map.pointToPixel(n.points[n.points.length-1]),a=e._map.pointToPixel(n.points[n.points.length-2]),l=[0,0],r=[0,0];r=o.y-a.y>=0?[-5,11]:[-5,-35],l=o.x-a.x>=0?[14,0]:[-14,0];var p=n.points[n.points.length-1];p.disLabel=new BMap.Label("",{offset:new BMap.Size(-15,-40),enableMassClear:e._enableMassClear}),p.disLabel.setStyles({color:"#333",borderColor:"#ff0103"}),e._map.addOverlay(p.disLabel),p.disLabel.setOffset(new BMap.Size(r[0],r[1])),p.disLabel.setPosition(p),e._formatTitle(2,"","",p.disLabel);var _=this._opts.closeIcon?this._opts.closeIcon:new BMap.Icon("http://api.map.baidu.com/images/mapctrls.gif",new BMap.Size(12,12),{imageOffset:new BMap.Size(0,-14)});n.closeBtn=new BMap.Marker(n.points[n.points.length-1],{icon:_,offset:new BMap.Size(l[0],l[1]),baseZIndex:36e5,enableMassClear:e._enableMassClear}),e._map.addOverlay(n.closeBtn),n.closeBtn.setTitle("清除本次测距"),n.closeBtn.addEventListener("click",function(i){for(var o=0,a=n.points.length;o<a;o++)n.points[o].disLabel.remove(),n.points[o].disLabel=null;for(o=0,a=n.paths.length;o<a;o++)n.paths[o].remove(),n.paths[o]=null;for(o=0,a=n.dots.length;o<a;o++)n.dots[o].remove(),n.dots[o]=null;n.closeBtn.remove(),n.closeBtn=null,s(i);var l=new t.lang.Event("onremovepolyline");e.dispatchEvent(l)}),e._initData()},n.prototype._formatTitle=function(t,e,i,n){var s=n||this._followTitle;if(s){s.setStyle({lineHeight:"16px",zIndex:"85",padding:"3px 5px"});var o=this._startFollowText||"",a=[];if(1==t){s.setOffset(0,25);var l=this._opts.unit,r=this._units[l].u1;(p=this._convertUnit(i,l))>this._units[l].incon?(p/=this._units[l].incon,r=this._units[l].u2,p=p.toFixed(1)):p=p.toFixed(0),a.push("<span>总长：<span style='"+this._styles.BMapLib_disBoxDis+"'>"+p+"</span>"+r+"</span><br />"),a.push("<span style='color:#7a7a7a'>"+e+"</span>")}else if(2==t){var p;l=this._opts.unit,r=this._units[l].u1,(p=this._convertUnit(this._getTotalDistance(),l))>this._units[l].incon?(p/=this._units[l].incon,r=this._units[l].u2,p=p.toFixed(1)):p=p.toFixed(0),a.push("总长：<span style='"+this._styles.BMapLib_disBoxDis+"'>"+p+"</span>"+r)}else s.setOffset(0,25),a.push(o);s.setContent(a.join(""))}},n.prototype._updateInstDis=function(t,e){var i=this._opts.unit,n=this._units[i].u1;if(e>this._units[i].incon?(e/=this._units[i].incon,n=this._units[i].u2,e=e.toFixed(1)):e=e.toFixed(0),t){var s=[];s.push("<span>总长：<span style='"+this._styles.BMapLib_disBoxDis+"'>"+e+"</span>"+n+"</span><br />"),s.push("<span style='color:#7a7a7a'>"+this._opts.followText+"</span>"),t.setContent(s.join(""))}},n.prototype._hideCurrent=function(){this._isOpen&&(this._paths.length>0&&this._paths[this._paths.length-1].hide(),this._followTitle&&this._followTitle.hide())},n.prototype._isPointValid=function(t){if(!t)return!1;var e=this._map.getBounds(),i=e.getSouthWest(),n=e.getNorthEast();return!(t.lng<i.lng||t.lng>n.lng||t.lat<i.lat||t.lat>n.lat)},n}()}).call(this,i("yLpj"))}}]);