(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2bfd"],{"4YML":function(t,e,i){},"4i1L":function(t,e,i){"use strict";var n=i("fKOR");i.n(n).a},Yb4v:function(t,e,i){"use strict";i.r(e);var n=i("14Xm"),o=i.n(n),a=i("D3Ub"),r=i.n(a),s=i("5WJX"),l=i.n(s),c=i("qoH+"),u=(i("eROu"),i("CQIl"),i("lDS1"),i("L+zx"),i("/75p"),i("w9f+"),i("B9f7"),i("9VcC"),i("aeQa"),i("MVQK"),i("Kwdf"),i("iGOs"),i("S9Dz"),i("Qjfq"),i("Oupb"),i("z7CG"),i("vFQT"),i("hArZ"),i("YuVX"),i("VaDg"),i("AzV5"),i("eOTG"),i("DvpE"),i("0tw5"),i("cZOo"),i("o9ut"),i("ZNhe"),i("LTPx"),i("hVuo"),i("5FW9"),i("CqDB"),i("Tqh3"),i("+70J"),i("Tmxy"),i("hOyB"),i("7anz"),i("66wf"),i("Cp0W"),i("aVf9"),i("3Ldi"),i("B9FH"),i("NN4D"),i("7zcm"),i("Nl51"),i("0Id1"),{components:{VueDialog:c.a},props:{tinyOpt:{type:Object,default:function(){return{height:400}}},id:{type:String,required:!1,default:"tinymce"},value:{type:String,default:"123"},htmlClass:{default:"",type:String},plugins:{default:function(){return[]},type:Array},other_options:{type:Object,default:function(){return{}}},readonly:{type:Boolean,default:!1},type:{type:String,default:""},galleryData:{type:Object,default:function(){}}},data:function(){return{visible:!1,content:"",editor:null,cTinyMce:null,checkerTimeout:null,isTyping:!1}},mounted:function(){this.content=this.value,this.init()},beforeDestroy:function(){this.editor.destroy()},watch:{$route:function(t,e){this.init()},value:function(t){this.isTyping||(this.content=t)},readonly:function(t){t?this.editor.setMode("readonly"):this.editor.setMode("design")}},methods:{init:function(){var t={selector:"#"+this.id,skin:!1,init_instance_callback:this.initEditor,height:350,language_url:document.location.protocol+"//"+window.location.host+"/static/langs/zh_CN.js",branding:!1,theme:"modern",toolbar_items_size:"small",plugins:["advlist autolink link image lists charmap print hr anchor pagebreak","searchreplace visualblocks visualchars code fullscreen media nonbreaking","table directionality emoticons textcolor paste textcolor colorpicker textpattern"],style_formats:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}],block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;",toolbar1:"insertfile undo redo | formatselect | bullist numlist | link unlink | uploadimg image media | fullscreen",toolbar2:"styleselect fontsizeselect | forecolor backcolor | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | outdent indent | removeformat"};l.a.init(this.concatAssciativeArrays(t,this.other_options))},initEditor:function(t){var e=this;this.editor=t,t.setContent(this.content),t.on("KeyUp",function(t){e.submitNewContent("keyup")}),t.on("Change",function(t){e.editor.getContent()!==e.value&&e.submitNewContent("keyup")}),t.on("init",function(i){t.setContent(e.content),e.$emit("input",e.content)}),this.readonly?this.editor.setMode("readonly"):this.editor.setMode("design"),this.$emit("editorInit",t)},concatAssciativeArrays:function(t,e){if(0===e.length)return t;if(0===t.length)return e;var i=[];for(var n in t)i[n]=t[n];for(var o in e)i[o]=e[o];return i},submitNewContent:function(t){var e=this;this.isTyping=!0,null!==this.checkerTimeout&&clearTimeout(this.checkerTimeout),this.checkerTimeout=setTimeout(function(){e.isTyping=!1,e.$emit(t,e.editor.getContent())},300)},clearContent:function(){l.a.activeEditor.setContent(""),this.submitNewContent("keyup")},confirmHandler:function(t){this.visible=!1;var e="";console.log(t.galleryList),t.galleryList.forEach(function(t){e+="<img src="+t.uploadLocalUrl+">"}),l.a.execCommand("mceInsertContent",!1,e),this.submitNewContent("keyup")}}}),d=(i("4i1L"),i("KHd+")),h=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"tinymce-gallery",staticStyle:{position:"relative"}},[i("textarea",{attrs:{id:t.id},domProps:{value:t.value}}),t._v(" "),i("vue-dialog",{attrs:{visible:t.visible,width:"80%",top:"5vh",title:"图片库",type:"PhotoGallery","pic-list":t.galleryData.list,"page-size":8},on:{closeHandler:function(e){t.visible=!1},confirmHandler:t.confirmHandler}}),t._v(" "),i("div",{staticStyle:{position:"absolute",top:"5px",right:"5px"}},[i("el-button",{staticClass:"tinymce-gallery-button",attrs:{type:"info",plain:""},on:{click:function(e){t.visible=!0}}},[t._v("图片库\n      ")]),t._v(" "),i("el-button",{staticClass:"tinymce-gallery-button",attrs:{type:"info",plain:""},on:{click:t.clearContent}},[t._v("清空\n      ")])],1)],1)])},[],!1,null,"32ca3aa2",null);h.options.__file="Tinymce.vue";var f=h.exports,p=i("IsxU"),m={name:"RichTxtTinymce",components:{Tinymce:f},data:function(){return{richTxtContent:"带图片组件封装",tinyOpt:{height:300},galleryData:{}}},created:function(){this.getPhotoList()},methods:{getPhotoList:function(){var t=this;return r()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)();case 2:t.galleryData=e.sent.data.galleryData;case 3:case"end":return e.stop()}},e,t)}))()},tinymceHandler:function(t){this.richTxtContent=t}}},y=(i("nMiD"),Object(d.a)(m,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"content"},[i("div",{staticClass:"content-spe"},[i("p",{staticClass:"content-spe-title"},[t._v(t._s(t.$t("route.tinymce")))]),t._v(" "),i("div",{staticClass:"content-spe-element"},[t._v("\n\n        富文本内容："+t._s(t.richTxtContent)+"\n        "),t._v(" "),i("Tinymce",{attrs:{id:"tinymce2",type:"PhotoGallery","gallery-data":t.galleryData,value:t.richTxtContent},on:{keyup:t.tinymceHandler}})],1)])])])},[],!1,null,"35772148",null));y.options.__file="tinymce.vue";e.default=y.exports},fKOR:function(t,e,i){},nMiD:function(t,e,i){"use strict";var n=i("4YML");i.n(n).a}}]);