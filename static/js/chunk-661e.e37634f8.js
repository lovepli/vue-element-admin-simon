(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-661e"],{"8MwD":function(t,e,n){"use strict";var i=n("PTiV");n.n(i).a},PTiV:function(t,e,n){},WM9E:function(t,e,n){"use strict";var i=n("YglQ");n.n(i).a},Yb4v:function(t,e,n){"use strict";n.r(e);var i=n("14Xm"),o=n.n(i),a=n("D3Ub"),r=n.n(a),s=n("5WJX"),l=n.n(s),c=n("qoH+"),u=(n("eROu"),n("CQIl"),n("lDS1"),n("L+zx"),n("/75p"),n("w9f+"),n("B9f7"),n("9VcC"),n("aeQa"),n("MVQK"),n("Kwdf"),n("iGOs"),n("S9Dz"),n("Qjfq"),n("Oupb"),n("z7CG"),n("vFQT"),n("hArZ"),n("YuVX"),n("VaDg"),n("AzV5"),n("eOTG"),n("DvpE"),n("0tw5"),n("cZOo"),n("o9ut"),n("ZNhe"),n("LTPx"),n("hVuo"),n("5FW9"),n("CqDB"),n("Tqh3"),n("+70J"),n("Tmxy"),n("hOyB"),n("7anz"),n("66wf"),n("Cp0W"),n("aVf9"),n("3Ldi"),n("B9FH"),n("NN4D"),n("7zcm"),n("Nl51"),n("0Id1"),{components:{VueDialog:c.a},props:{tinyOpt:{type:Object,default:function(){return{height:350}}},id:{type:String,required:!1,default:"tinymce"},value:{type:String,default:"123"},htmlClass:{default:"",type:String},plugins:{default:function(){return[]},type:Array},other_options:{type:Object,default:function(){return{}}},readonly:{type:Boolean,default:!1},type:{type:String,default:""},galleryData:{type:Object,default:function(){}}},data:function(){return{visible:!1,content:"",editor:null,cTinyMce:null,checkerTimeout:null,isTyping:!1,isFullscreen:!1}},mounted:function(){this.content=this.value,this.init()},beforeDestroy:function(){this.editor.destroy()},watch:{$route:function(t,e){this.init()},value:function(t){this.isTyping||(this.content=t)},readonly:function(t){t?this.editor.setMode("readonly"):this.editor.setMode("design")}},methods:{init:function(){console.log("production");var t={selector:"#"+this.id,skin:!1,init_instance_callback:this.initEditor,height:this.tinyOpt.height,language_url:document.location.protocol+"//"+window.location.host+"/vue-element-admin-simon/static/langs/zh_CN.js",branding:!1,theme:"modern",toolbar_items_size:"small",plugins:["advlist autolink link image lists charmap print hr anchor pagebreak","searchreplace visualblocks visualchars code fullscreen media nonbreaking","table directionality emoticons textcolor paste textcolor colorpicker textpattern"],style_formats:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}],block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;",toolbar1:"insertfile undo redo | formatselect | bullist numlist | link unlink | uploadimg image media | fullscreen",toolbar2:"styleselect fontsizeselect | forecolor backcolor | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | outdent indent | removeformat"};l.a.init(this.concatAssciativeArrays(t,this.other_options))},initEditor:function(t){var e=this;this.editor=t,t.setContent(this.content),t.on("KeyUp",function(t){e.submitNewContent("keyup")}),t.on("Change",function(t){e.editor.getContent()!==e.value&&e.submitNewContent("keyup")}),t.on("FullscreenStateChanged",function(t){e.isFullscreen=t.state}),t.on("init",function(n){t.setContent(e.content),e.$emit("input",e.content)}),this.readonly?this.editor.setMode("readonly"):this.editor.setMode("design"),this.$emit("editorInit",t)},concatAssciativeArrays:function(t,e){if(0===e.length)return t;if(0===t.length)return e;var n=[];for(var i in t)n[i]=t[i];for(var o in e)n[o]=e[o];return n},submitNewContent:function(t){var e=this;this.isTyping=!0,null!==this.checkerTimeout&&clearTimeout(this.checkerTimeout),this.checkerTimeout=setTimeout(function(){e.isTyping=!1,e.$emit(t,e.editor.getContent())},300)},clearContent:function(){l.a.activeEditor.setContent(""),this.submitNewContent("keyup")},confirmHandler:function(t){this.visible=!1;var e="";console.log(t.galleryList),t.galleryList.forEach(function(t){e+="<img src="+t.uploadLocalUrl+">"}),l.a.execCommand("mceInsertContent",!1,e),this.submitNewContent("keyup")}}}),d=(n("WM9E"),n("KHd+")),h=Object(d.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tinymce-gallery",class:{fullscreen:t.isFullscreen},staticStyle:{position:"relative"}},[n("textarea",{attrs:{id:t.id},domProps:{value:t.value}}),t._v(" "),n("div",{staticClass:"tinymce-gallery-buttons"},[n("el-button",{staticClass:"tinymce-gallery-buttons-button",attrs:{type:"info",plain:""},on:{click:function(e){t.visible=!0}}},[t._v("图片库\n    ")]),t._v(" "),n("el-button",{staticClass:"tinymce-gallery-buttons-button",attrs:{type:"info",plain:""},on:{click:t.clearContent}},[t._v("清空\n    ")])],1),t._v(" "),n("vue-dialog",{attrs:{visible:t.visible,width:"80%",top:"5vh",title:"图片库",type:"PhotoGallery","pic-list":t.galleryData.list,"page-size":8},on:{closeHandler:function(e){t.visible=!1},confirmHandler:t.confirmHandler}})],1)},[],!1,null,"0f981637",null);h.options.__file="Tinymce.vue";var f=h.exports,p=n("IsxU"),m={name:"RichTxtTinymce",components:{Tinymce:f},data:function(){return{richTxtContent:"带图片组件封装",tinyOpt:{height:300},galleryData:{}}},created:function(){this.getPhotoList()},methods:{getPhotoList:function(){var t=this;return r()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)();case 2:t.galleryData=e.sent.data.galleryData;case 3:case"end":return e.stop()}},e,t)}))()},tinymceHandler:function(t){this.richTxtContent=t}}},y=(n("8MwD"),Object(d.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"content"},[n("div",{staticClass:"content-spe"},[n("p",{staticClass:"content-spe-title"},[t._v(t._s(t.$t("route.tinymce")))]),t._v(" "),n("div",{staticClass:"content-spe-element"},[t._v("\n\n        富文本内容："+t._s(t.richTxtContent)+"\n        "),n("Tinymce",{attrs:{id:"tinymce2","tiny-opt":t.tinyOpt,type:"PhotoGallery","gallery-data":t.galleryData,value:t.richTxtContent},on:{keyup:t.tinymceHandler}})],1)])])])},[],!1,null,"27de0eb4",null));y.options.__file="tinymce.vue";e.default=y.exports},YglQ:function(t,e,n){}}]);